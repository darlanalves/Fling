!function(){var e=angular.module("fling",["ui.router","assert","defer"]).config(["assertProvider",function(e){e.enableThrow(!0)}]);e.config(["$stateProvider",function(e){var t={app:{url:"",templateUrl:"/layout/layout.html"},"app.user.signup":{url:"/app/signup",templateUrl:"/user/signup.html",controller:"User/SignupController"},"app.user.my-profile":{url:"/app/me",templateUrl:"/user/profile.html",controller:"User/ProfileController"},"app.people":{url:"/app/people",templateUrl:"/people/people.html"},"app.people.trending":{url:"/trending",templateUrl:"/people/trending.html",controller:"People/TrendingController"},"app.people.search":{url:"/search?name&gender&height",templateUrl:"/people/search.html",controller:"People/SearchController"}};angular.forEach(t,function(t,r){e.state(r,t)})}]),e.directive("searchBox",function(){function e(e,t){function r(){e(),clearTimeout(n),n=null}var n;return function(){n||(n=setTimeout(r,t))}}return{template:'<input type="text" ng-model="search.keyword" placeholder="{{placeholder}}" /><button class="button" ng-bind="actionText"></button>',replace:!0,restrict:"C",scope:{onsearch:"&",placeholder:"@",actionText:"@"},link:function(t,r,n){t.search={};{var o=t.onsearch;e(function(){o(t.search.keywords)},n.delay||50)}t.$watch("search.keywords",o)}}}),e.controller("HeaderController",["$scope","$state",function(e,t){e.searchByName=function(e){t.go("app.people.search",{name:e})}}]),e.controller("People/SearchController",function(){}),e.controller("People/TrendingController",function(){}),e.factory("SearchFilter",function(){function e(){return!this instanceof e?new e:(this.clearFilters(),void this.clearSorting())}return e.prototype={constructor:e,clearFilters:function(){this.$filter={}},clearSorting:function(){this.$sort=null},setFilter:function(e,t){this.$filter[e]=t},setSorting:function(e,t){this.$sort={name:e,direction:t||"asc"}},setPageParams:function(e,t){this.$page=Math.abs(0|e),this.$limit=0|t},getParams:function(){return{filter:this.$filter,sort:this.$sort,page:this.$page,limit:this.$limit}}},e}),e.factory("UserService",["$http","assert","is","SearchFilter","rejected",function(e,t,r,n,o){return{GENDER_MALE:"male",GENDER_FEMALE:"female",findOne:function(t){return t?e.get("/user/"+t):o(new Error("Identificação de usuário inválida"))},findAll:function(r){try{t(r instanceof n,"Parâmetros de busca inválidos")}catch(l){return o(l)}return e.post("/user",r.getParams())},create:function(t){try{r.number(+t.uid,"CPF inválido"),r.number(+t.height,"Altura inválida"),r.not.empty(t.name,"Nome inválido"),r.not.empty(t.gender,"Sexo não informado")}catch(n){return o(n)}return e.post("/user",t)}}}])}();